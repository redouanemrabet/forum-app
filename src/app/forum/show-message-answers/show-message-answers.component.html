<div>
  <div class="ms-4 mt-2">
    <a routerLink="/consultationmessages" class="text-decoration-none">
      <i class="fas fa-arrow-left fa-2x back-icon"></i>
    </a>
  </div>

  <div class="container mt-5 bg-body-tertiary rounded p-5">
    <div style="margin: 0 auto">
      <div class="card rounded-card">
        <div class="position-absolute top-0 mt-2 mt-2 end-0 me-2">
          <button
            routerLink="/updatequestion"
            type="button"
            class="btn button-edit me-2 btn-outline btn-sm"
          >
            <i class="fas fa-edit"></i>
          </button>
          <button type="button" (click)="deleteQuestion()" class="btn btn-outline-danger btn-sm">
            <i class="fas fa-trash-alt"></i>
          </button>
        </div>
        <div *ngIf="question" class="card-body">
          <div class="d-flex align-items-center mb-3">
            <img
              [src]="question.user?.profilePicture"
              class="rounded-circle me-2"
              width="50"
              height="50"
              alt="Profile Picture"
            />
            <h6 class="card-subtitle mb-0">{{ question.user?.fullName }}</h6>
          </div>
          <h4 class="card-text mb-3">{{ question.question }}</h4>
          <h5>{{ question.descriptionQuestion }}</h5>
          <div
            class="d-flex flex-row position-absolute bottom-0 end-0 mb-2 me-2"
          >
            <div class="like-icon me-2">
              <i class="far fa-thumbs-up"></i>
              <span>23</span>
            </div>
            <div class="dislike-iocn">
              <i class="far fa-thumbs-down"></i>
              <span>3</span>
            </div>
          </div>
        </div>
      </div>
      <!-- Bouton d'ajout de question -->
      <div class="row mb-3">
        <div class="col-md-12">
          <button
            routerLink="/addanswer"
            class="btn mt-3 btn-primary new"
            style="background-color: #684ae7; border: none"
          >
            <i class="fa fa-plus"></i> Ajouter une réponse
          </button>
        </div>
      </div>

      <div class="d-flex flex-column flex-wrap">
        <div *ngIf="question?.answers" class="row row-cols-4">
          <div
            *ngFor="let answer of question?.answers"
            class="col-md-4 mb-3"
            style="width: 50%"
          >
            <div class="card rounded-card">
              <div class="position-absolute top-0 mt-2 mt-2 end-0 me-2">
                <button
                  type="button"
                  class="btn button-edit me-2 btn-circle btn-sm"
                >
                  <i class="fas fa-edit"></i>
                </button>
                <button type="button" class="btn btn-outline-danger btn-sm">
                  <i class="fas fa-trash-alt"></i>
                </button>
              </div>
              <div class="card-body">
                <div class="d-flex align-items-center mb-3">
                  <img
                    src="https://images.unsplash.com/photo-1497316730643-415fac54a2af?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&w=1000&q=80"
                    class="rounded-circle me-2"
                    width="50"
                    height="50"
                    alt="Profile Picture"
                  />
                  <h6 class="card-subtitle mb-0">
                    {{ answer.user?.fullName }}
                  </h6>
                </div>

                <h5 class="card-text">{{ answer.content }}</h5>
              </div>
            </div>
          </div>
        </div>
        <div
          *ngIf="!question?.answers"
          class="rounded-card bg-white p-5 text-center"
        >
          <h5>Pas de réponses pour cette question!!</h5>
        </div>

       <!-- popup to confirm the deletion question -->
       <app-modal-popup (deleteConfirmed)="onDeleteConfirmed()"></app-modal-popup> 
      </div>
    </div>
  </div>
</div>
